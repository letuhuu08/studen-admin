(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-051dee3a"],{"0e8f":function(t,a,e){"use strict";e("20f6");var o=e("e8f2");a["a"]=Object(o["a"])("flex")},1681:function(t,a,e){},"25da":function(t,a,e){"use strict";e("9bb3")},3168:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={PHAN_QUYEN_CAN_BO:["ALL_CANBO_PHANQUYEN","CANBO_PHANQUYEN"],XEM_CAN_BO_ALL:["ALL_CANBO_XEM"],XEM_CAN_BO_DV:["CANBO_XEM"],THEM_MOI_CAN_BO_ALL:["ALL_CANBO_CAPNHAT"],THEM_MOI_CAN_BO_DV:["CANBO_CAPNHAT"],XEM_SINH_VIEN_ALL:["ALL_SINHVIEN_XEM"],XEM_SINH_VIEN_DV:["SINHVIEN_XEM"],THEM_MOI_SINH_VIEN_ALL:["ALL_SINHVIEN_CAPNHAT"],THEM_MOI_SINH_VIEN_DV:["SINHVIEN_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_ALL:["ALL_ALBUM_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_DV:["ALBUM_CAPNHAT"],CAP_NHAT_TIN_BAI_ALL:["ALL_TINBAI_CAPNHAT"],CAP_NHAT_TIN_BAI_DV:["TINBAI_CAPNHAT"],XEM_TIN_BAI_ALL:["ALL_TINBAI_XEM"],XEM_TIN_BAI_DV:["TINBAI_XEM"],DUYET_TIN_BAI:["TINBAI_DUYET"],HUY_XUAT_BAN_TIN_BAI:["TINBAI_HUY_XUATBAN"],XUAT_BAN_TIN_BAI:["TINBAI_XUATBAN"],CAP_NHAT_VA_THEM_BAN_DO:["BANDO_CAPNHAT"],XOA_BAN_DO:["BANDO_XOA"],CAP_NHAT_VA_THEM_LOAI_BAN_DO:["LOAI_BANDO_CAPNHAT"],XOA_LOAI_BAN_DO:["LOAI_BANDO_XOA"],THEM_NGUOI_DUNG:["IMPORT_USER"],ALL_NHATRO_CAPNHAT:["ALL_NHATRO_CAPNHAT"],ALL_NHATRO_XEM:["ALL_NHATRO_XEM"],NHATRO_CAPNHAT:["NHATRO_CAPNHAT"],NHATRO_XEM:["NHATRO_XEM"]}},4624:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var o=e("66e5");const i={name:"useAccountAuthorization",data(){return{}},mounted(){},methods:{handleCheckActionAuthor(t){const a=this,e=a.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const o of e)if(t.includes(o))return!0;return!1},handleCheckAuthor(t,a){var e;console.log("key: ",t,a);const i=this;let n="";const s=null===(e=i.$cookies.get("UserInfo",""))||void 0===e?void 0:e.vaiTroSuDung.split(",");for(const l of s){if(t.includes(l)){n=o["a"].ALL;break}a.includes(l)&&(n=o["a"].ALONE)}return n}}}},"66e5":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={ALL:"ALL",ALONE:"ALONE"}},"9bb3":function(t,a,e){},a398:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[t.checkActionAddAndUpdate?e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticStyle:{float:"right"}},[t.checkActionAddAndUpdate?e("v-btn",{staticClass:"btn-form mx-3 text-white",attrs:{small:"",color:"primary"},on:{click:function(a){t.toggleAdvanceSearch=!t.toggleAdvanceSearch}}},[t.toggleAdvanceSearch?e("v-icon",{attrs:{size:"18"}},[t._v("mdi-filter-variant")]):e("v-icon",{attrs:{size:"18"}},[t._v("mdi-filter-variant-plus")]),t._v("  Tìm kiếm ")],1):t._e(),e("v-btn",{staticClass:"btn-form mx-0 text-white",attrs:{small:"",color:"primary"},on:{click:t.showModalForm}},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-plus")]),t._v("  Thêm mới ")],1)],1)]):t._e()],1),t.toggleAdvanceSearch?e("v-card",{staticClass:"mt-5 py-4",attrs:{outlined:"",elevation:"0"}},[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"mb-2"},[t._v("Nhập từ khóa tìm kiếm:")]),e("v-text-field",{staticClass:"input-form",attrs:{solo:"",dense:"",clearable:"","hide-details":"auto",placeholder:"Nhập từ khóa tìm kiếm"},model:{value:t.textSearch,callback:function(a){t.textSearch=a},expression:"textSearch"}})],1),e("v-col",{staticClass:"px-2",attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"mb-2"},[t._v("Chọn trạng thái hiển thị:")]),e("div",[e("v-autocomplete",{staticClass:"input-form",attrs:{items:t.optionDisplayStatus,placeholder:"Trạng thái hiển thị",dense:"",clearable:"",solo:""},on:{change:function(a){return t.getListMapFilter("TT")}},model:{value:t.statusSearch,callback:function(a){t.statusSearch=a},expression:"statusSearch"}})],1)]),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"mb-2"},[t._v("Chọn khu vực:")]),e("div",[e("v-autocomplete",{staticClass:"input-form",attrs:{items:t.listArea,placeholder:"Khu vực",dense:"",clearable:"",solo:""},on:{change:function(a){return t.getListMapFilter("KV")}},model:{value:t.areaSearch,callback:function(a){t.areaSearch=a},expression:"areaSearch"}})],1)])],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"mb-2"},[t._v("Nhập tọa độ tìm kiếm:")]),e("div",{staticClass:"d-flex justify-end"},[e("v-flex",{staticClass:"mr-4"},[e("v-text-field",{staticClass:"input-form",attrs:{solo:"",dense:"",clearable:"","hide-details":"auto",placeholder:"Kinh độ..."},model:{value:t.longitudeSearch,callback:function(a){t.longitudeSearch=a},expression:"longitudeSearch"}})],1),e("v-flex",{},[e("v-text-field",{staticClass:"input-form",attrs:{solo:"",dense:"",clearable:"","hide-details":"auto",placeholder:"Vĩ độ..."},model:{value:t.latitudeSearch,callback:function(a){t.latitudeSearch=a},expression:"latitudeSearch"}})],1)],1)])],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"mb-2"},[t._v("Chọn khoảng trả lời:")]),e("div",{staticClass:"d-flex justify-end"},[e("v-flex",{staticClass:"mr-4"},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,i=a.attrs;return[e("v-text-field",t._g(t._b({staticClass:"flex input-form",attrs:{rules:[t.rules.date,t.rules.checkDateNow,t.rules.checkDateInputStartSend],placeholder:"Từ ngày...","persistent-hint":"","prepend-icon":"",solo:"",dense:"","hide-details":"auto","hide-no-data":""},on:{blur:function(a){t.dateStartSend=t.parseDate(t.textDateStartSend)}},model:{value:t.textDateStartSend,callback:function(a){t.textDateStartSend=a},expression:"textDateStartSend"}},"v-text-field",i,!1),o))]}}],null,!1,1154296693),model:{value:t.toggleShowMenuStartDateSend,callback:function(a){t.toggleShowMenuStartDateSend=a},expression:"toggleShowMenuStartDateSend"}},[e("v-date-picker",{attrs:{"no-title":""},on:{input:function(a){t.toggleShowMenuStartDateSend=!1}},model:{value:t.dateStartSend,callback:function(a){t.dateStartSend=a},expression:"dateStartSend"}})],1)],1),e("v-flex",{},[e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,i=a.attrs;return[e("v-text-field",t._g(t._b({staticClass:"flex input-form",attrs:{rules:[t.rules.date,t.rules.checkDateNow,t.rules.checkDateInputEndSend],placeholder:"Đến ngày...","persistent-hint":"","prepend-icon":"",solo:"",dense:"","hide-details":"auto","hide-no-data":""},on:{blur:function(a){t.dateEndSend=t.parseDate(t.textDateEndSend)}},model:{value:t.textDateEndSend,callback:function(a){t.textDateEndSend=a},expression:"textDateEndSend"}},"v-text-field",i,!1),o))]}}],null,!1,2296327435),model:{value:t.toggleShowMenuEndDateSend,callback:function(a){t.toggleShowMenuEndDateSend=a},expression:"toggleShowMenuEndDateSend"}},[e("v-date-picker",{attrs:{"no-title":""},on:{input:function(a){t.toggleShowMenuEndDateSend=!1}},model:{value:t.dateEndSend,callback:function(a){t.dateEndSend=a},expression:"dateEndSend"}})],1)],1)],1)])],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"d-flex justify-end"},[t.checkActionAddAndUpdate?e("v-btn",{staticClass:"btn-form mx-0 text-white",attrs:{small:"",color:"primary"},on:{click:t.getListMapFilter}},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-magnify")]),t._v("  Tìm kiếm ")],1):t._e()],1)])],1)],1)],1):t._e(),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"7"}},[e("v-data-table",{staticClass:"table-base custom-table mt-2",attrs:{headers:t.headers,items:t.listMap,"items-per-page":t.itemsPerPage,"item-key":"PrimKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name","single-select":""},on:{"click:row":t.handleDisplayMap},scopedSlots:t._u([{key:"item.stt",fn:function(a){var e=a.index;return[t._v(" "+t._s((t.page+1)*t.itemsPerPage-t.itemsPerPage+e+1)+" ")]}},{key:"item.trangthai",fn:function(a){var e=a.item;return[t._v(" "+t._s(t._f("displayStatusMap")(e.TrangThaiHienThi))+" ")]}},{key:"item.thaotac",fn:function(a){var o=a.item;return[t.checkActionAddAndUpdate?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editMap(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])]):t._e(),"1"===o.TrangThaiHienThi?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"#6fc750",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.handleOpenDilogConfirmDisplayStautus(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-checkbox-marked-circle")])],1)]}}],null,!0)},[e("span",[t._v("Xác nhận địa điểm")])]):t._e(),t.checkActionDelete?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.deleteMap(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Xóa")])]):t._e()]}}])}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1),e("v-col",{staticClass:"pt-5",attrs:{cols:"5"}},[e("MapPosition",{attrs:{dataProps:t.dataPropsMap,listMap:t.listMap}})],1)],1),t.dialogForm?e("div",[e("v-dialog",{attrs:{"max-width":"1000",persistent:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật bản đồ")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới bản đồ")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("FormBanDo",{ref:"formBanDoRef",attrs:{dataEdit:t.dataEdit},on:{emitDataArea:t.handleEmitDataArea,emitDataTypeMap:t.handleEmitDataTypeMap}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e(),t.confirmMap?e("div",[e("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.confirmMap,callback:function(a){t.confirmMap=a},expression:"confirmMap"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[e("span",{staticClass:"text-h5"},[t._v("Xác nhận hiển thị địa điểm bản đồ")])]),e("v-card-text",{staticClass:"px-0"},[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("FormConfirmMap",{ref:"FormConfirmMapRef",attrs:{dataItem:t.dataEdit},on:{emitDataListTypeMap:t.handleEmitDataListTypeMap}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeDialogConfirmDisplayStatus}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.handleComfirmMap}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),e("span",[t._v("Xác nhận")])],1)],1)],1)],1)],1):t._e()],1)},i=[],n=(e("13d5"),e("c1df")),s=e.n(n),l=e("e20e"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formBanDoRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tên địa điểm: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầy đủ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenDiaDiem,callback:function(a){t.$set(t.formData,"TenDiaDiem",a)},expression:"formData.TenDiaDiem"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Trạng thái hiển thị")]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{items:t.optionDisplayStatus,label:"Chọn",dense:"",solo:""},model:{value:t.formData.TrangThaiHienThi,callback:function(a){t.$set(t.formData,"TrangThaiHienThi",a)},expression:"formData.TrangThaiHienThi"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Mô tả:")]),e("v-textarea",{staticClass:"flex input-form",attrs:{solo:"",dense:"","hide-details":"auto",required:""},model:{value:t.formData.MoTa,callback:function(a){t.$set(t.formData,"MoTa",a)},expression:"formData.MoTa"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Kinh độ:")]),e("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.number],solo:"",label:"Nhập kinh độ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.kinhDo,callback:function(a){t.$set(t.formData,"kinhDo",a)},expression:"formData.kinhDo"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Vĩ độ:")]),e("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.number],solo:"",label:"Nhập vĩ độ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.viDo,callback:function(a){t.$set(t.formData,"viDo",a)},expression:"formData.viDo"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Loại bản đồ:")]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{items:t.listTypeMap,label:"Chọn",dense:"",solo:""},model:{value:t.formData.LoaiBanDo,callback:function(a){t.$set(t.formData,"LoaiBanDo",a)},expression:"formData.LoaiBanDo"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Khu vực: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],items:t.listArea,label:"Chọn",dense:"",solo:""},model:{value:t.formData.KhuVuc,callback:function(a){t.$set(t.formData,"KhuVuc",a)},expression:"formData.KhuVuc"}})],1)],1)],1)},c=[],d={props:["dataEdit"],data(){var t,a,e,o,i,n,s,l,r,c;return{formData:{TenDiaDiem:(null===(t=this.dataEdit)||void 0===t?void 0:t.TenDiaDiem)||"",LoaiBanDo:(null===(a=this.dataEdit)||void 0===a||null===(e=a.LoaiBanDo)||void 0===e?void 0:e.MddLoaiBanDo)||"",kinhDo:(null===(o=this.dataEdit)||void 0===o||null===(i=o.ToaDo)||void 0===i?void 0:i.Longitude)||"",viDo:(null===(n=this.dataEdit)||void 0===n||null===(s=n.ToaDo)||void 0===s?void 0:s.Latitude)||"",KhuVuc:(null===(l=this.dataEdit)||void 0===l||null===(r=l.KhuVuc)||void 0===r?void 0:r.MddKhuVuc)||"",MoTa:(null===(c=this.dataEdit)||void 0===c?void 0:c.MoTa)||"",TrangThaiHienThi:this.dataEdit.TrangThaiHienThi||""},validForm:!1,listArea:[],listTypeMap:[],rules:{required:t=>!!t||"Không được để trống.",number:t=>{const a=/^\d+(\.\d{1,22})?$/;return!t||(a.test(t)||"Trường này phải nhập số")}},optionDisplayStatus:[{text:"Không hiển thị",value:"1"},{text:"Hiển thị",value:"2"}]}},mounted(){},created(){const t=this;t.getListArea(),t.getListTypeMap()},computed:{},methods:{validateForm(){let t=this;return t.$refs.formBanDoRef.validate()},getListArea(){let t=this;t.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},e={collectionName:"khuvuc",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){t.$emit("emitDataArea",a.content),t.listArea=a.content.map(t=>({text:t.TenKhuVuc,value:t.MaDinhDanh}))})).catch((function(){t.loadingData=!1}))},getListTypeMap(){let t=this;t.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},e={collectionName:"loaibando",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){t.$emit("emitDataTypeMap",a.content),t.listTypeMap=a.content.map(t=>({text:t.TenLoaiBanDo,value:t.MaDinhDanh}))})).catch((function(){t.loadingData=!1}))}}},u=d,h=e("2877"),m=e("6544"),p=e.n(m),v=e("c6a6"),D=e("62ad"),f=e("4bd4"),g=e("0fd9"),_=e("8654"),T=e("a844"),A=Object(h["a"])(u,r,c,!1,null,null,null),M=A.exports;p()(A,{VAutocomplete:v["a"],VCol:D["a"],VForm:f["a"],VRow:g["a"],VTextField:_["a"],VTextarea:T["a"]});var S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formConfirmMapRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tên địa điểm: ")]),e("v-text-field",{staticClass:"flex input-form",attrs:{solo:"",label:"Nhập tên địa điểm...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenDiaDiem,callback:function(a){t.$set(t.formData,"TenDiaDiem",a)},expression:"formData.TenDiaDiem"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Loại bản đồ: ")]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{"hide-no-data":"",items:t.listTypeMap,"item-text":"text","item-value":"value",dense:"",solo:"","hide-details":"auto",clearable:"",placeholder:"Loại bản đồ",required:""},model:{value:t.formData.LoaiBanDo,callback:function(a){t.$set(t.formData,"LoaiBanDo",a)},expression:"formData.LoaiBanDo"}})],1)],1)],1)},x=[],b={props:["dataItem"],data(){var t;return{formData:{TenDiaDiem:this.dataItem.TenDiaDiem||"",LoaiBanDo:(null===(t=this.dataItem.LoaiBanDo)||void 0===t?void 0:t.MddLoaiBanDo)||"",TrangThaiHienThi:"2"},listTypeMap:[],validForm:!1,rules:{required:t=>!!t||"Không được để trống."}}},mounted(){},created(){const t=this;t.getListTypeMap()},methods:{validateForm(){let t=this;return t.$refs.formConfirmMapRef.validate()},getListTypeMap(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},o={collectionName:"loaibando",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",o).then((function(t){a.$emit("emitDataListTypeMap",t.content),a.listTypeMap=t.content.map(t=>({text:t.TenLoaiBanDo,value:t.MaDinhDanh}))})).catch((function(){}))}}},C=b,y=Object(h["a"])(C,S,x,!1,null,"543d136e",null),N=y.exports;p()(y,{VAutocomplete:v["a"],VCol:D["a"],VForm:f["a"],VRow:g["a"],VTextField:_["a"]});var k=e("854a"),L=e.n(k),E=e("3168"),I=e("4624"),w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrap-map",style:{height:t.heightMap}},[e("GmapMap",{staticStyle:{width:"100%",height:"100%"},attrs:{center:t.center,zoom:12}},[e("GmapMarker",{attrs:{position:t.position},on:{click:function(a){t.center=t.position}}})],1)],1)},B=[],H={props:["dataProps","listMap"],data(){return{center:{lat:21.0377211,lng:105.7820087},position:{lat:0,lng:0},heightMap:"100%"}},mounted(){console.log("Data: ",this.dataProps)},watch:{dataProps:function(t){const a=this;a.position={lat:+t.ToaDo.Latitude,lng:+t.ToaDo.Longitude}},listMap(t){const a=this;console.log("watch",t),t.length<=8?a.heightMap="486px":a.heightMap="100%"}}},V=H,F=Object(h["a"])(V,w,B,!1,null,null,null),O=F.exports,P={components:{Pagination:l["a"],FormBanDo:M,FormConfirmMap:N,MapPosition:O},mixins:[I["a"]],data(){return{longitudeSearch:"",latitudeSearch:"",areaSearch:"",statusSearch:"",selected:[],textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt"},{sortable:!1,text:"Tên địa điểm",align:"left",value:"TenDiaDiem",class:"th-center"},{sortable:!1,text:"Khu vực",align:"left",value:"KhuVuc.TenKhuVuc",class:"th-center"},{sortable:!1,text:"Trạng thái hiển thị",align:"left",value:"trangthai",class:"th-center",width:200},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:200}],listMap:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idMap:"",emitDataArea:[],emitDataTypeMap:"",checkActionAuthor:!1,checkActionAddAndUpdate:"",checkActionDelete:"",optionDisplayStatus:[{text:"Chưa xác nhận địa điểm bản đồ",value:"1"},{text:"Đã xác nhận địa điểm bản đồ",value:"2"}],confirmMap:!1,emitDataListTypeMap:[],dataPropsMap:null,toggleAdvanceSearch:!1,listArea:[],rules:{date:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;let e;return e=!t||(a.test(t)||"Định dạng ngày là: ngày/tháng/năm"),e},checkDateNow:t=>{const a=s()(new Date,"DD/MM/YYYY").valueOf(),e=s()(t,"DD/MM/YYYY").valueOf(),o=a-e>0;return!t||(o||"Ngày nhập không được sau ngày "+s()(new Date,"DD/MM/YYYY").format("DD/MM/YYYY"))},checkDateInputStartSend:t=>{if(this.textDateEndSend){const a=s()(this.textDateEndSend,"DD/MM/YYYY").valueOf(),e=s()(t,"DD/MM/YYYY").valueOf(),o=a-e>0;return!t||(o||"Ngày nhập không được sau ngày "+s()(this.textDateEndSend,"DD/MM/YYYY").format("DD/MM/YYYY"))}return!0},checkDateInputEndSend:t=>{if(this.textDateStartSend){const a=s()(this.textDateStartSend,"DD/MM/YYYY").valueOf(),e=s()(t,"DD/MM/YYYY").valueOf(),o=!(a-e>0);return o||"Ngày nhập không được sau ngày "+s()(this.textDateStartSend,"DD/MM/YYYY").format("DD/MM/YYYY")}return!0}},textDateStartSend:"",textDateEndSend:"",toggleShowMenuStartDateSend:!1,dateStartSend:"",toggleShowMenuEndDateSend:!1,dateEndSend:""}},created(){const t=this;t.checkActionAddAndUpdate=t.handleCheckActionAuthor(E["a"].CAP_NHAT_VA_THEM_BAN_DO),t.checkActionDelete=t.handleCheckActionAuthor(E["a"].XOA_BAN_DO),t.getListData("","BD"),t.getListData(),console.log("add and update: ",t.checkActionAddAndUpdate,E["a"])},mounted(){console.log("select: ",this.selected)},methods:{getListMapFilter(t){const a=this;switch(console.log("tim kiếm"),t){case"TT":a.getListData({TrangThaiHienThi:a.statusSearch},"BD"),a.textDateStartSend="",a.textDateEndSend="",a.textSearch="",a.longitudeSearch="",a.latitudeSearch="",a.areaSearch="";break;case"KV":a.getListData({MddKhuVuc:a.areaSearch},"BD"),a.textDateStartSend="",a.textDateEndSend="",a.textSearch="",a.longitudeSearch="",a.latitudeSearch="",a.statusSearch="";break;default:const t={TenBanDoSo:a.textSearch,Longitude:a.longitudeSearch,Latitude:a.latitudeSearch,NgayTraLoiFrom:s()(a.textDateEndSend,"DD/MM/YYYY").valueOf(),NgayTraLoiTo:s()(a.textDateStartSend,"DD/MM/YYYY").valueOf()};t.NgayTraLoiFrom||delete t.NgayTraLoiFrom,t.NgayTraLoiTo||delete t.NgayTraLoiTo,console.log("param: ",t),a.getListData(t,"BD"),a.areaSearch="",a.statusSearch="";break}},getListData(t,a){let e=this;e.loadingData=!0;const o={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},i={collectionName:"BD"===a?"bandoso":"khuvuc",data:t?{...t,...o}:o};e.$store.dispatch("collectionFilter",i).then((function(t){a?(e.listMap=t.content.map(t=>({...t})),console.log("res: ",e.listMap),e.total=e.listMap.length,e.page=t.pageable.pageNumber,e.pageCount=t.totalPages,e.loadingData=!1):e.listArea=t.content.map(t=>({text:t.TenKhuVuc,value:t.MaDinhDanh}))})).catch((function(){e.loadingData=!1}))},deleteMap(t){const a=this;a.dialogDelete=!1;const e={payload:t.PrimKey,type:"bandoso"};a.$store.commit("SET_SHOWCONFIRM",!0);let o={auth:!1,title:"Xóa địa điểm bản đồ",message:"Bạn có chắc chắn muốn xóa địa điểm này",button:{yes:"Có",no:"Không"},callback:()=>{a.$store.dispatch("deleteItemData",e).then((function(e){L.a.success("Xóa thành công"),a.listMap=a.listMap.reduce((function(a,e){return t.PrimKey!==e.PrimKey&&a.push(e),a}),[]),a.total=a.listMap.length,console.log("res dele: ",e)})).catch((function(){a.loadingData=!1}))}};a.$store.commit("SET_CONFIG_CONFIRM_DIALOG",o)},editMap(t){const a=this;a.edittingForm=!0,console.log("item edit: ",t),a.dataEdit=t,a.dialogForm=!0},handleOpenDilogConfirmDisplayStautus(t){const a=this;a.confirmMap=!0,a.dataEdit={...t}},handleComfirmMap(){const t=this;if(t.$refs.FormConfirmMapRef.validateForm()){const a=t.$refs.FormConfirmMapRef.formData,e={...t.dataEdit,...a};e.LoaiBanDo=t.emitDataListTypeMap.reduce((t,e)=>a.LoaiBanDo===e.MaDinhDanh?{...t,MddLoaiBanDo:e.MaDinhDanh,TenLoaiBanDo:e.TenLoaiBanDo,MaIcon:e.MaIcon}:{...t},{});const o={payload:e,type:"bandoso",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",o).then((function(o){L.a.success("Cập nhật thành công"),t.confirmMap=!1,t.listMap=t.listMap.reduce((function(a,o){return t.dataEdit.PrimKey===o.PrimKey?[...a,{...o,...e}]:[...a,o]}),[]),t.dataEdit={},console.log("res edit: ",o,e,t.dataEdit.PrimKey,t.listNews,a)})).catch((function(){t.loadingData=!1,L.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}},handleEmitDataListTypeMap(t){const a=this;a.listTypeMap=t},handleDisplayMap(t,a){const e=this;a.select(!0),console.log("item props: ",t),e.dataPropsMap=t},handlechangePage(t){const a=this;a.getListMap(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},closeDialogConfirmDisplayStatus(){const t=this;t.confirmMap=!1,t.dataEdit={}},handleEmitDataArea(t){const a=this;a.emitDataArea=t},handleEmitDataTypeMap(t){const a=this;a.emitDataTypeMap=t},submitForm(){const t=this;if(t.$refs.formBanDoRef.validateForm()){const a=t.$refs.formBanDoRef.formData,e={...a,ToaDo:{Latitude:a.viDo,Longitude:a.kinhDo}};if(console.log("emit: ",t.emitDataTypeMap),e.LoaiBanDo=t.emitDataTypeMap.reduce((t,e)=>a.LoaiBanDo===e.MaDinhDanh?{...t,MddLoaiBanDo:e.MaDinhDanh,TenLoaiBanDo:e.TenLoaiBanDo,MaIcon:e.MaIcon}:t,{}),e.KhuVuc=t.emitDataArea.reduce((t,e)=>a.KhuVuc===e.MaDinhDanh?{...t,TenKhuVuc:e.TenKhuVuc,ToaDo:e.ToaDo,MddKhuVuc:e.MaDinhDanh}:t,{}),delete e.kinhDo,delete e.viDo,t.edittingForm){const a={payload:e,type:"bandoso",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){L.a.success("Cập nhật thành công"),t.dialogForm=!1,t.listMap=t.listMap.reduce((e,o)=>t.dataEdit.PrimKey===o.PrimKey?[...e,{...o,...a.data.resp}]:[...e,o],[]),console.log("res edit: ",a,e,t.dataEdit.PrimKey,t.listMap),t.dataEdit={}})).catch((function(){t.loadingData=!1,L.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"bandoso"};t.$store.dispatch("createItemData",a).then((function(a){if(L.a.success("Thêm mới thành công"),t.listMap.length<t.itemsPerPage){const e=[...t.listMap];e.push({...a.data.resp}),t.listMap=e}t.dialogForm=!1,t.total=t.listMap.length,console.log("res post: ",a)})).catch((function(a){t.loadingData=!1}))}console.log("submit",a,t.emitDataArea,t.emitDataTypeMap,e)}},formatDate(t){if(!t)return null;const[a,e,o]=t.split("-");return`${o}/${e}/${a}`},parseDate(t){if(!t)return null;const[a,e,o]=t.split("/");return`${o}-${e.padStart(2,"0")}-${a.padStart(2,"0")}`}},filters:{displayStatusMap:function(t){return t?"2"===t?"Đã xác nhận địa điểm":"Chưa xác nhận địa điểm":""}},watch:{dateStartSend(){const t=this;t.textDateStartSend=t.formatDate(t.dateStartSend)},dateEndSend(){const t=this;t.textDateEndSend=t.formatDate(t.dateEndSend)}}},Y=P,$=(e("25da"),e("8336")),K=e("b0af"),X=e("99d9"),R=e("a523"),U=e("8fea"),z=e("2e4b"),G=e("169a"),j=e("0e8f"),q=e("132d"),Q=e("e449"),J=e("2fa4"),W=e("71d9"),Z=e("2a7f"),tt=e("3a2f"),at=Object(h["a"])(Y,o,i,!1,null,null,null);a["default"]=at.exports;p()(at,{VAutocomplete:v["a"],VBtn:$["a"],VCard:K["a"],VCardActions:X["a"],VCardText:X["b"],VCol:D["a"],VContainer:R["a"],VDataTable:U["a"],VDatePicker:z["a"],VDialog:G["a"],VFlex:j["a"],VIcon:q["a"],VMenu:Q["a"],VRow:g["a"],VSpacer:J["a"],VTextField:_["a"],VToolbar:W["a"],VToolbarItems:Z["a"],VToolbarTitle:Z["b"],VTooltip:tt["a"]})},a844:function(t,a,e){"use strict";e("1681");var o=e("8654"),i=e("58df");const n=Object(i["a"])(o["a"]);a["a"]=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...o["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick(()=>{var a;t?this.calculateInputHeight():null==(a=this.$refs.input)||a.style.removeProperty("height")})},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const a=t.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(e,a)+"px"},genInput(){const t=o["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){o["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);