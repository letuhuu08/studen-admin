(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fb44730"],{"0e8f":function(t,e,a){"use strict";a("20f6");var n=a("e8f2");e["a"]=Object(n["a"])("flex")},"133f":function(t,e,a){"use strict";a("5b87")},1681:function(t,e,a){},"21d5":function(t,e,a){"use strict";a("b723")},"23a7":function(t,e,a){"use strict";a("13d5"),a("5803");var n=a("2677"),i=a("cc20"),o=a("80d2"),s=a("d9bd"),l=a("d9f7");e["a"]=n["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>Object(o["I"])(t).every(t=>null!=t&&"object"===typeof t)}},computed:{classes(){return{...n["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce((t,{size:e=0})=>t+e,0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(o["x"])(e,1024===this.base))},internalArrayValue(){return Object(o["I"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map(t=>{const{name:e="",size:a=0}=t,n=this.truncateText(e);return this.showSize?`${n} (${Object(o["x"])(a,1024===this.base)})`:n}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&Object(s["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];Object(o["k"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((t,e)=>this.$createElement(i["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t])):[]},genControl(){const t=n["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(l["d"])(t.data.style,{display:"none"})),t},genInput(){const t=n["a"].options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))}):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=n["a"].options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}})},2677:function(t,e,a){"use strict";var n=a("8654");e["a"]=n["a"]},"4f6e":function(t,e,a){"use strict";a("dc0c")},5803:function(t,e,a){},"5b87":function(t,e,a){},"6bbf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-text-field",{staticClass:"input-form",attrs:{solo:"",dense:"",clearable:"","hide-details":"auto",placeholder:"Nhập từ khóa tìm kiếm","append-icon":"mdi-magnify"},on:{"click:append":function(e){return t.getListHandBookFilter("")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getListHandBookFilter("")},"click:clear":function(e){return t.getListHandBookFilter("clear")}},model:{value:t.textSearch,callback:function(e){t.textSearch=e},expression:"textSearch"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-autocomplete",{staticClass:"flex input-form",attrs:{"hide-no-data":"",items:t.optionTypeHandBook,"item-text":"text","item-value":"value",dense:"",solo:"","hide-details":"auto",clearable:"",placeholder:"Chuyên mục"},on:{change:t.handleChangeTypeHandBook}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticStyle:{float:"right"}},[a("v-btn",{staticClass:"btn-form mx-0 text-white",attrs:{small:"",color:"primary"},on:{click:t.showModalForm}},[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-plus")]),t._v("  Thêm mới ")],1)],1)])],1),a("v-row",{staticClass:"my-0 mb-3"},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listHandBook,"items-per-page":t.itemsPerPage,"item-key":"primKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.stt",fn:function(e){var a=e.index;return[t._v(" "+t._s((t.page+1)*t.itemsPerPage-t.itemsPerPage+a+1)+" ")]}},{key:"item.thaotac",fn:function(e){var n=e.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.openDialogPublicDate(n)}}},"v-btn",o,!1),i),[2==n.TrangThai?a("v-icon",{attrs:{size:"18",color:"orange"}},[t._v("mdi-close-octagon-outline")]):a("v-icon",{attrs:{size:"18"}},[t._v("mdi-file-export-outline")])],1)]}}],null,!0)},[a("span",[t._v(t._s("2"===n.TrangThai?"Ngừng xuất bản":"Xuất bản"))])]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""}},"v-btn",o,!1),i),[a("router-link",{staticClass:"text-decoration-none",attrs:{to:"/chi-tiet-cam-nang-hoa-lac/"+n.PrimKey}},[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-clipboard-text")])],1)],1)]}}],null,!0)},[a("span",[t._v("xem chi tiết")])]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteGroup(n)}}},"v-btn",o,!1),i),[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[t._v("Xóa")])])]}}])}),t.pageCount?a("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"1422",fullscreen:""},model:{value:t.dialogForm,callback:function(e){t.dialogForm=e},expression:"dialogForm"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?a("v-toolbar-title",[t._v("Cập nhật cẩm nang Hòa Lạc")]):t._e(),t.edittingForm?t._e():a("v-toolbar-title",[t._v("Thêm mới cẩm nang Hòa Lạc")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("FormHandBook",{ref:"formHandBookRef",attrs:{dataEdit:t.dataEdit}}),a("v-card-actions",{staticClass:"d-inline-block custom-position"},[a("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():a("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.submitForm.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?a("span",[t._v("Cập nhật")]):a("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1):t._e(),t.dialogPublicDate?a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.dialogPublicDate,callback:function(e){t.dialogPublicDate=e},expression:"dialogPublicDate"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[a("span",{staticClass:"text-h5"},[t._v("Ngày xuất bản")])]),a("v-card-text",{staticClass:"px-0"},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("FormPublicDateHandBook",{ref:"formPublicDateHandBookRef",attrs:{dataItem:t.dataItem}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.dialogPublicDate=!1}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():a("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.handlePublicDate}},[a("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),a("span",[t._v("Xác nhận")])],1)],1)],1)],1)],1):t._e(),t.openDialogUnPublic?a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.openDialogUnPublic,callback:function(e){t.openDialogUnPublic=e},expression:"openDialogUnPublic"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[a("span",{staticClass:"text-h5"},[t._v("Ngày hủy xuất bản")])]),a("v-card-text",{staticClass:"px-0"},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("FormUnPublicDateHandBook",{ref:"formUnPublicDateHandBookRef",attrs:{dataItem:t.dataItem}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.openDialogUnPublic=!1}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():a("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.handleUnPublicDate}},[a("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),a("span",[t._v("Xác nhận")])],1)],1)],1)],1)],1):t._e()],1)},i=[],o=(a("13d5"),a("e20e")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formCamNangHoaLacRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Tên cẩm nang: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên cẩm nang...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenCamNang,callback:function(e){t.$set(t.formData,"TenCamNang",e)},expression:"formData.TenCamNang"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Tiêu đề cẩm nang: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tiêu đề cẩm nang...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TieuDe,callback:function(e){t.$set(t.formData,"TieuDe",e)},expression:"formData.TieuDe"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Chuyên mục cẩm nang: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-autocomplete",{staticClass:"flex input-form",attrs:{"hide-no-data":"",items:t.getOptionTypeHandBook,"item-text":"name","item-value":"value",placeholder:"Chọn chuyên mục",dense:"",solo:"","hide-details":"auto","return-object":"",clearable:""},on:{change:t.handleChange},model:{value:t.formData.MddChuyenMuc,callback:function(e){t.$set(t.formData,"MddChuyenMuc",e)},expression:"formData.MddChuyenMuc"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v("Tóm tắt:")]),a("v-textarea",{staticClass:"flex input-form",attrs:{solo:"",label:"Nhập tóm tắt...","hide-details":"auto",required:"",rows:"5"},model:{value:t.formData.TomTat,callback:function(e){t.$set(t.formData,"TomTat",e)},expression:"formData.TomTat"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v("Ảnh đại diện:")]),a("v-flex",[t.formData.AnhDaiDien?a("img",{staticStyle:{height:"200px","max-width":"100%"},attrs:{src:t.formData.AnhDaiDien,alt:""}}):t._e()]),a("v-flex",{staticClass:"mt-2"},[a("v-file-input",{staticClass:"flex input-form",attrs:{accept:"image/png, image/jpeg, image/bmp","prepend-icon":"","prepend-inner-icon":"mdi-cloud-upload-outline",label:"Chọn ảnh đại diện",solo:"",dense:""},on:{change:t.handleChangeFile}})],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Mục lục: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._l(t.arrData,(function(e,n){return a("v-row",{key:n,staticClass:"mb-2"},[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required,t.rules.number],solo:"",label:"Nhập số thứ tự...",dense:"","hide-details":"auto",required:""},model:{value:e["SoThuTu"],callback:function(a){t.$set(e,"SoThuTu",a)},expression:"item['SoThuTu']"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required,t.rules.number],solo:"",label:"Nhập số trang...",dense:"","hide-details":"auto",required:""},model:{value:e["SoTrang"],callback:function(a){t.$set(e,"SoTrang",a)},expression:"item['SoTrang']"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầu mục...",dense:"","hide-details":"auto",required:""},model:{value:e["TenDauMuc"],callback:function(a){t.$set(e,"TenDauMuc",a)},expression:"item['TenDauMuc']"}})],1),a("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"1"}},[a("span",{staticClass:"titleText btn-close",on:{click:function(e){return t.handleRemoveItem(n)}}},[t._v("X")])])],1)})),a("v-btn",{staticClass:"btn-form mx-0 margin-bottom-86 text-white",attrs:{small:"",color:"primary"},on:{click:t.addField}},[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-plus")]),t._v("  Thêm mục lục ")],1)],2),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Nội dung: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._l(t.arrDataContent,(function(e,n){return a("v-row",{key:n,staticClass:"mb-2"},[t.arrUrl[n]||e.Attachment?a("v-col",{staticClass:"mx-0 my-0",attrs:{cols:"12",sm:"3"}}):t._e(),t.arrUrl[n]||e.Attachment?a("v-col",{attrs:{cols:"12",sm:"9"}},[a("v-flex",[a("img",{staticStyle:{height:"100px","max-width":"100%"},attrs:{src:t.arrUrl[n]||e.Attachment,alt:""}})])],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập số thứ tự...",dense:"","hide-details":"auto",required:""},model:{value:e["SoTrang"],callback:function(a){t.$set(e,"SoTrang",a)},expression:"item['SoTrang']"}})],1),a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-file-input",{staticClass:"flex input-form",attrs:{accept:"image/png, image/jpeg, image/bmp","prepend-icon":"","prepend-inner-icon":"mdi-cloud-upload-outline",label:"Chọn ảnh đại diện",solo:"",dense:""},on:{change:t.handleChangeFileContent}})],1),a("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"1"}},[a("span",{staticClass:"titleText btn-close",on:{click:function(a){return t.handleRemoveItem(e,"content")}}},[t._v("X")])])],1)})),a("v-btn",{staticClass:"btn-form mx-0 margin-bottom-86 text-white",attrs:{small:"",color:"primary"},on:{click:function(e){return t.addField("content")}}},[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-plus")]),t._v("  Thêm nội dung ")],1)],2)],1)],1)},l=[],r=a("854a"),c=a.n(r),u={props:["dataEdit"],data(){return{formData:{TenCamNang:"",AnhDaiDien:"",MucLuc:"",NoiDung:"",TieuDe:"",TomTat:"",MaChuyenMuc:"",TenChuyenMuc:"",MddChuyenMuc:""},arrUrl:[],validForm:!1,arrRender:[],arrData:[{SoThuTu:"",TenDauMuc:"",SoTrang:""}],arrDataContent:[{id:Math.random(),SoTrang:"",Attachment:""}],rules:{required:t=>!!t||"Không được để trống.",number:t=>{const e=/^(?:[1-9]\d*|\d)$/;return e.test(t)||"Trường này phải nhập số"}},listTypeHandBook:[]}},mounted(){},created(){var t,e,a;const n=this;var i,o;(n.getTypeHandBook({danhMuc_maDanhMuc:"CHUYENMUCCAMNANG"}),null!==(t=n.dataEdit)&&void 0!==t&&t.MucLuc&&(n.arrData=null===(e=n.dataEdit)||void 0===e?void 0:e.MucLuc),null!==(a=n.dataEdit)&&void 0!==a&&a.NoiDung)&&(n.arrDataContent=null===(i=n.dataEdit)||void 0===i?void 0:i.NoiDung,n.arrUrl=null===(o=n.dataEdit)||void 0===o?void 0:o.NoiDung.map(t=>t.Attachment))},computed:{getOptionTypeHandBook(){const t=this,e=t.listTypeHandBook.map(t=>({name:t.TenMuc,value:t.MaDinhDanh}));return e}},methods:{validateForm(){let t=this;return t.$refs.formCamNangHoaLacRef.validate()},getTypeHandBook(t){let e=this;e.loadingData=!0;const a={page:0,size:20},n={collectionName:"dulieudanhmuc",data:t?{...a,...t}:a};e.$store.dispatch("collectionFilter",n).then((function(t){e.listTypeHandBook=t.content})).catch((function(){e.loadingData=!1}))},handleChangeFile(t){const e=this;if(t){let a=new FormData;a.append("files",t);const n={type:"camnang/upload",payload:a};e.$store.dispatch("uploadFile",n).then((function(t){const a=t.data.fullPath;e.formData.AnhDaiDien=a})).catch((function(){c.a.error("Upload không thành công")}))}else e.formData.AnhDaiDien="",c.a.error("Upload không thành công")},handleChangeFileContent(t){const e=this;if(t){let a=new FormData;a.append("files",t);const n={type:"camnang/upload",payload:a};e.$store.dispatch("uploadFile",n).then((function(t){const a=t.data.fullPath;e.arrUrl=[...e.arrUrl,a]})).catch((function(){c.a.error("Upload không thành công")}))}else e.formData.AnhDaiDien="",c.a.error("Upload không thành công")},handleRemoveItem(t,e){const a=this;if(e){let e;a.arrDataContent=a.arrDataContent.filter((a,n)=>(t.id===a.id&&(e=n),t.id!==a.id)),a.arrUrl=a.arrUrl.filter((t,a)=>a!==e)}else a.arrData=a.arrData.filter((e,a)=>a!==t)},addField(t){const e=this;if("content"!==t)e.arrData.push({SoThuTu:"",TenDauMuc:"",SoTrang:""});else{const t=Math.random();e.arrDataContent.push({id:t,SoTrang:"",Attachment:""})}},handleChange(t){const e=this,a=e.listTypeHandBook.filter(e=>e.MaDinhDanh===t.value);e.formData.TenChuyenMuc=a[0].TenMuc,e.formData.MaChuyenMuc=a[0].PrimKey}}},d=u,h=(a("4f6e"),a("2877")),m=a("6544"),p=a.n(m),g=a("c6a6"),f=a("8336"),v=a("62ad"),b=a("23a7"),y=a("0e8f"),D=a("4bd4"),x=a("132d"),C=a("0fd9"),k=a("8654"),T=a("a844"),_=Object(h["a"])(d,s,l,!1,null,"fb404f7c",null),B=_.exports;p()(_,{VAutocomplete:g["a"],VBtn:f["a"],VCol:v["a"],VFileInput:b["a"],VFlex:y["a"],VForm:D["a"],VIcon:x["a"],VRow:C["a"],VTextField:k["a"],VTextarea:T["a"]});var M=a("c1df"),S=a.n(M),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formPublicDateHandBookRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Ngày xuất bản: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.birthday,t.rules.checkDatePresent,t.rules.required],solo:"",label:"Nhập ngày xuất bản...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.NgayXuatBan,callback:function(e){t.$set(t.formData,"NgayXuatBan",e)},expression:"formData.NgayXuatBan"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Ngày hủy xuất bản: ")]),a("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.birthday],solo:"",label:"Nhập ngày hủy xuất bản...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.NgayHuyXuatBan,callback:function(e){t.$set(t.formData,"NgayHuyXuatBan",e)},expression:"formData.NgayHuyXuatBan"}})],1)],1)],1)},F=[],$={props:["dataItem"],data(){return{formData:{NgayXuatBan:this.dataItem.NgayXuatBan?S()(this.dataItem.NgayXuatBan).format("DD/MM/YYYY"):S()(new Date).format("DD/MM/YYYY"),NgayHuyXuatBan:this.dataItem.NgayHuyXuatBan?S()(this.dataItem.NgayHuyXuatBan).format("DD/MM/YYYY"):"",TrangThai:"2"},validForm:!1,rules:{required:t=>!!t||"Không được để trống.",birthday:t=>{const e=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return!t||(e.test(t)||"Định dạng ngày sinh là: ngày/tháng/năm")},checkDatePresent:t=>{let e=!0;const a=S()(S()(new Date).format("DD/MM/YYYY"),"DD/MM/YYYY").valueOf(),n=S()(t,"DD/MM/YYYY").valueOf(),i=a-n;return i>0&&(e=!1),e||"Ngày xuất bản không được trước ngày "+S()(new Date,"DD/MM/YYYY").format("DD/MM/YYYY")}}}},mounted(){},created(){},methods:{validateForm(){let t=this;return t.$refs.formPublicDateHandBookRef.validate()}}},w=$,P=Object(h["a"])(w,H,F,!1,null,"47477c94",null),V=P.exports;p()(P,{VCol:v["a"],VForm:D["a"],VRow:C["a"],VTextField:k["a"]});var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formUnPublicDateHandBookRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"d-flex custom-checkbox"},[a("div",{staticClass:"titleText custom-title"},[t._v("Hủy xuất bản luôn:")]),a("v-checkbox",{staticClass:"m-0 p-0",model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)])],1),t.status?t._e():a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v("Ngày hủy xuất bản:")]),a("v-flex",{},[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"flex input-form",attrs:{rules:[t.rules.date],clearable:"",placeholder:"Đến ngày...","persistent-hint":"","prepend-icon":"",solo:"",dense:"","hide-details":"auto","hide-no-data":""},on:{blur:function(e){t.dateUnPublic=t.parseDate(t.textDate)}},model:{value:t.textDate,callback:function(e){t.textDate=e},expression:"textDate"}},"v-text-field",i,!1),n))]}}],null,!1,2556854456),model:{value:t.toggleShowMenuDate,callback:function(e){t.toggleShowMenuDate=e},expression:"toggleShowMenuDate"}},[a("v-date-picker",{attrs:{"no-title":"",min:t.dateMinSelect},on:{input:function(e){t.toggleShowMenuDate=!1}},model:{value:t.dateUnPublic,callback:function(e){t.dateUnPublic=e},expression:"dateUnPublic"}})],1)],1)],1)],1)],1)},N=[],A={props:["dataItem"],data(){return{validForm:!1,status:!1,toggleShowMenuDate:!1,textDate:"",dateUnPublic:"",rules:{date:t=>{const e=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;let a;return a=!t||(e.test(t)||"Định dạng ngày là: ngày/tháng/năm"),a}}}},mounted(){},created(){},methods:{validateForm(){let t=this;return t.$refs.formUnPublicDateHandBookRef.validate()},formatDate(t){if(!t)return null;const[e,a,n]=t.split("-");return`${n}/${a}/${e}`},parseDate(t){if(!t)return null;const[e,a,n]=t.split("/");return`${n}-${a.padStart(2,"0")}-${e.padStart(2,"0")}`}},computed:{dateMinSelect(){const t=this;return S()(t.dataItem.NgayXuatBan).format("YYYY-MM-DD")}},watch:{dateUnPublic(){const t=this;t.textDate=t.formatDate(t.dateUnPublic)}}},Y=A,U=(a("21d5"),a("ac7c")),z=a("2e4b"),L=a("e449"),R=Object(h["a"])(Y,I,N,!1,null,"60c7c0eb",null),O=R.exports;p()(R,{VCheckbox:U["a"],VCol:v["a"],VDatePicker:z["a"],VFlex:y["a"],VForm:D["a"],VMenu:L["a"],VRow:C["a"],VTextField:k["a"]});var E={components:{Pagination:o["a"],FormHandBook:B,FormPublicDateHandBook:V,FormUnPublicDateHandBook:O},data(){return{textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:50},{sortable:!1,text:"Tên cẩm nang",align:"left",value:"TenCamNang",class:"th-center",width:222},{sortable:!1,text:"Mục lục",align:"left",value:"TenMucCon",class:"th-center"},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:200}],listHandBook:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},listCategoryHandBook:[],dialogPublicDate:!1,openDialogUnPublic:!1}},created(){const t=this;t.getListHandBook(),t.getListTypeHandBook({danhMuc_maDanhMuc:"CHUYENMUCCAMNANG"})},mounted(){},computed:{optionTypeHandBook(){const t=this,e=t.listCategoryHandBook.map(t=>({text:t.TenMuc,value:t.MaDinhDanh}));return e}},methods:{handleChangeTypeHandBook(t){const e=this;e.getListHandBook({MddChuyenMuc:t})},getListHandBookFilter(t){const e=this;console.log("tim kiếm"),t?e.getListHandBook({}):e.getListHandBook({keyword:e.textSearch})},getListHandBook(t){let e=this;e.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},n={collectionName:"camnang",data:t?{...a,...t}:a};e.$store.dispatch("collectionFilter",n).then((function(t){const a=t.content;let n=[];console.log("res group: ",a),a.forEach(t=>{const e=JSON.parse(t.Content);"CamNangHoaLac"===e.Type&&(console.log("run loop"),n.push({...e,PrimKey:t.PrimKey}))}),e.listHandBook=n.map(t=>({...t,TenMucCon:t.MucLuc.map(t=>t.TenDauMuc).join(", ")})),console.log("for",e.listHandBook),e.total=e.listHandBook.length,e.pageCount=t.totalPages,e.loadingData=!1})).catch((function(){e.loadingData=!1}))},getListTypeHandBook(t){let e=this;e.loadingData=!0;const a={page:0,size:20},n={collectionName:"dulieudanhmuc",data:t?{...a,...t}:a};e.$store.dispatch("collectionFilter",n).then((function(t){e.listCategoryHandBook=t.content,e.total=e.listCategoryHandBook.length,e.pageCount=t.totalPages,e.page=t.pageable.pageNumber,e.loadingData=!1})).catch((function(){e.loadingData=!1}))},deleteGroup(t){const e=this;e.dialogDelete=!1;const a={payload:t.PrimKey,type:"camnang"};e.$store.commit("SET_SHOWCONFIRM",!0);let n={auth:!1,title:"Xóa loại cẩm nang Hòa Lạc",message:"Bạn có chắc chắn muốn xóa cẩm nang Hòa Lạc này",button:{yes:"Có",no:"Không"},callback:()=>{e.$store.dispatch("deleteItemData",a).then((function(a){c.a.success("Xóa thành công"),e.listHandBook=e.listHandBook.reduce((function(e,a){return t.PrimKey!==a.PrimKey&&e.push(a),e}),[]),console.log("res dele: ",a)})).catch((function(){e.loadingData=!1}))}};e.$store.commit("SET_CONFIG_CONFIRM_DIALOG",n)},handlechangePage(t){const e=this;e.getListHandBook(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},openDialogPublicDate(t){const e=this;e.dataItem=t,"2"!==t.TrangThai?e.dialogPublicDate=!0:e.openDialogUnPublic=!0},handlePublicDate(){const t=this;if(t.$refs.formPublicDateHandBookRef.validateForm()){const e=t.$refs.formPublicDateHandBookRef.formData,a={...t.dataItem,...e};a.NgayXuatBan=a.NgayXuatBan?S()(a.NgayXuatBan,"DD/MM/YYYY").valueOf():"",a.NgayHuyXuatBan=a.NgayHuyXuatBan?S()(a.NgayHuyXuatBan,"DD/MM/YYYY").valueOf():"",console.log("dataPayload: ",a,e);const n={payload:a,type:"camnang",id:t.dataItem.PrimKey};t.$store.dispatch("editItemData",n).then((function(n){c.a.success("Cập nhật thành công"),t.dialogPublicDate=!1,t.listHandBook=t.listHandBook.reduce((function(e,n){return t.dataItem.PrimKey===n.PrimKey?[...e,{...n,...a}]:[...e,n]}),[]),t.dataEdit={},console.log("res edit: ",n,a,e)})).catch((function(){t.loadingData=!1,c.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}},handleUnPublicDate(){const t=this;if(t.$refs.formUnPublicDateHandBookRef.validateForm()){console.log("formdata: ",t.$refs.formUnPublicDateHandBookRef,t.dataItem);const e={...t.dataItem};t.$refs.formUnPublicDateHandBookRef.status?e.TrangThai="1":e.NgayHuyXuatBan=S()(t.$refs.formUnPublicDateHandBookRef.textDate,"DD/MM/YYYY").valueOf();const a={payload:e,type:"camnang",id:e.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){c.a.success("Cập nhật thành công"),t.openDialogUnPublic=!1,t.listHandBook=t.listHandBook.reduce((function(e,n){return t.dataItem.PrimKey===n.PrimKey?[...e,{...n,...a.data.resp}]:[...e,n]}),[]),console.log(t.listHandBook,e)})).catch((function(){t.loadingData=!1,c.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}},submitForm(){const t=this;if(t.$refs.formHandBookRef.validateForm()){const e=t.$refs.formHandBookRef.formData,a=t.$refs.formHandBookRef.arrData,n=t.$refs.formHandBookRef.arrDataContent,i=t.$refs.formHandBookRef.arrUrl,o={TenCamNang:e.TenCamNang||"",AnhDaiDien:e.AnhDaiDien||"",MucLuc:a,NoiDung:n.map((t,e)=>({SoTrang:t.SoTrang,Attachment:i[e],id:t.id})),Type:"CamNangHoaLac"},s={...e,Content:JSON.stringify(o),TrangThai:"1"};if(s.MddChuyenMuc=e.MddChuyenMuc.value,delete s.AnhDaiDien,delete s.MucLuc,delete s.NoiDung,delete s.TenCamNang,t.edittingForm){const e={payload:s,type:"camnang",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",e).then((function(e){c.a.success("Cập nhật thành công"),t.dialogForm=!1,t.getListHandBook(),console.log("res edit: ",e,t.dataEdit.PrimKey),t.dataEdit={}})).catch((function(){t.loadingData=!1,c.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const e={payload:s,type:"camnang"};t.$store.dispatch("createItemData",e).then((function(e){c.a.success("Thêm mới thành công"),t.dialogForm=!1,console.log("res post: ",e);const a=[...t.listHandBook];a.push({...s,...JSON.parse(s.Content),MaDinhDanh:e.data.resp.MaDinhDanh,PrimKey:e.data.resp.PrimKey,TenMucCon:o.MucLuc.map(t=>t.TenDauMuc).join(", ")}),console.log("DATA:",a),t.listHandBook=a})).catch((function(){t.loadingData=!1,c.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}console.log("submit",e,s,o)}}}},X=E,K=(a("133f"),a("b0af")),j=a("99d9"),q=a("a523"),G=a("8fea"),J=a("169a"),W=a("2fa4"),Q=a("71d9"),Z=a("2a7f"),tt=a("3a2f"),et=Object(h["a"])(X,n,i,!1,null,"0e0358fa",null);e["default"]=et.exports;p()(et,{VAutocomplete:g["a"],VBtn:f["a"],VCard:K["a"],VCardActions:j["a"],VCardText:j["b"],VCol:v["a"],VContainer:q["a"],VDataTable:G["a"],VDialog:J["a"],VIcon:x["a"],VRow:C["a"],VSpacer:W["a"],VTextField:k["a"],VToolbar:Q["a"],VToolbarItems:Z["a"],VToolbarTitle:Z["b"],VTooltip:tt["a"]})},"6ca7":function(t,e,a){},a844:function(t,e,a){"use strict";a("1681");var n=a("8654"),i=a("58df");const o=Object(i["a"])(n["a"]);e["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...n["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick(()=>{var e;t?this.calculateInputHeight():null==(e=this.$refs.input)||e.style.removeProperty("height")})},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=n["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){n["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},ac7c:function(t,e,a){"use strict";a("6ca7"),a("ec29");var n=a("9d26"),i=a("c37a"),o=a("fe09");e["a"]=o["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick(()=>this.inputIndeterminate=t)},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(n["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},b723:function(t,e,a){},dc0c:function(t,e,a){},ec29:function(t,e,a){},fe09:function(t,e,a){"use strict";var n=a("c37a"),i=a("5607"),o=a("2b0e"),s=o["a"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),l=a("8547"),r=a("58df");function c(t){t.preventDefault()}e["a"]=Object(r["a"])(n["a"],s,l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=n["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:c},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const a=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===a&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}})}}]);