(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d48cd2a"],{2279:function(t,a,e){"use strict";e("e7d8")},3168:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));const n={PHAN_QUYEN_CAN_BO:["ALL_CANBO_PHANQUYEN","CANBO_PHANQUYEN"],XEM_CAN_BO_ALL:["ALL_CANBO_XEM"],XEM_CAN_BO_DV:["CANBO_XEM"],THEM_MOI_CAN_BO_ALL:["ALL_CANBO_CAPNHAT"],THEM_MOI_CAN_BO_DV:["CANBO_CAPNHAT"],XEM_SINH_VIEN_ALL:["ALL_SINHVIEN_XEM"],XEM_SINH_VIEN_DV:["SINHVIEN_XEM"],THEM_MOI_SINH_VIEN_ALL:["ALL_SINHVIEN_CAPNHAT"],THEM_MOI_SINH_VIEN_DV:["SINHVIEN_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_ALL:["ALL_ALBUM_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_DV:["ALBUM_CAPNHAT"],CAP_NHAT_TIN_BAI_ALL:["ALL_TINBAI_CAPNHAT"],CAP_NHAT_TIN_BAI_DV:["TINBAI_CAPNHAT"],XEM_TIN_BAI_ALL:["ALL_TINBAI_XEM"],XEM_TIN_BAI_DV:["TINBAI_XEM"],DUYET_TIN_BAI:["TINBAI_DUYET"],HUY_XUAT_BAN_TIN_BAI:["TINBAI_HUY_XUATBAN"],XUAT_BAN_TIN_BAI:["TINBAI_XUATBAN"],CAP_NHAT_VA_THEM_BAN_DO:["BANDO_CAPNHAT"],XOA_BAN_DO:["BANDO_XOA"],CAP_NHAT_VA_THEM_LOAI_BAN_DO:["LOAI_BANDO_CAPNHAT"],XOA_LOAI_BAN_DO:["LOAI_BANDO_XOA"],THEM_NGUOI_DUNG:["IMPORT_USER"],ALL_NHATRO_CAPNHAT:["ALL_NHATRO_CAPNHAT"],ALL_NHATRO_XEM:["ALL_NHATRO_XEM"],NHATRO_CAPNHAT:["NHATRO_CAPNHAT"],NHATRO_XEM:["NHATRO_XEM"]}},4624:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("66e5");const i={name:"useAccountAuthorization",data(){return{}},mounted(){},methods:{handleCheckActionAuthor(t){const a=this,e=a.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const n of e)if(t.includes(n))return!0;return!1},handleCheckAuthor(t,a){var e;console.log("key: ",t,a);const i=this;let o="";const s=null===(e=i.$cookies.get("UserInfo",""))||void 0===e?void 0:e.vaiTroSuDung.split(",");for(const r of s){if(t.includes(r)){o=n["a"].ALL;break}a.includes(r)&&(o=n["a"].ALONE)}return o}}}},"66e5":function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));const n={ALL:"ALL",ALONE:"ALONE"}},"6f39":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formPhanNhomQuyenRef",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Cán bộ: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-select",{staticClass:"flex input-form",attrs:{items:t.listCadres,label:"Chọn cán bộ",chips:"",multiple:"",solo:"","hide-details":"auto",rules:[t.rules.required],required:""},model:{value:t.formData.canbo,callback:function(a){t.$set(t.formData,"canbo",a)},expression:"formData.canbo"}})],1)],1),e("v-row",{staticClass:"mt-0"},[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Nhóm quyền: ")]),e("v-select",{staticClass:"flex input-form",attrs:{items:t.listGroup,chips:"",label:"Chọn nhóm quyền",multiple:"",solo:"","hide-details":"auto","hide-no-data":"",required:""},model:{value:t.formData.TenNhomQuyen,callback:function(a){t.$set(t.formData,"TenNhomQuyen",a)},expression:"formData.TenNhomQuyen"}})],1)],1)],1)},i=[],o={props:["dataCadres","dataEditCadres"],data(){return{formData:{canbo:this.dataEditCadres||"",TenNhomQuyen:""},listGroup:[],listCadres:[],validForm:!1,rules:{required:t=>!!t||"Không được để trống."}}},mounted(){},created(){const t=this;t.listCadres=t.dataCadres.map(t=>({text:t.HoVaTen,value:t.MaDinhDanh})),t.getGroup()},methods:{validateForm(){let t=this;return t.$refs.formPhanNhomQuyenRef.validate()},resetForm(){let t=this;t.$refs.formPhanNhomQuyenRef.reset(),t.$refs.formPhanNhomQuyenRef.resetValidation()},getGroup(){let t=this;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"1",thamChieu_maMuc:""},e={collectionName:"nhomquyen",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){const e=a.content;t.listGroup=e.map(t=>({text:t.TenNhomQuyen,value:t.MaDinhDanh}))}))}}},s=o,r=e("2877"),l=e("6544"),c=e.n(l),d=e("62ad"),u=e("4bd4"),h=e("0fd9"),m=e("b974"),g=Object(r["a"])(s,n,i,!1,null,"7f8ed32c",null);a["a"]=g.exports;c()(g,{VCol:d["a"],VForm:u["a"],VRow:h["a"],VSelect:m["a"]})},"908f":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"4"}},[e("v-text-field",{staticClass:"input-form",attrs:{solo:"",dense:"",clearable:"","hide-details":"auto",placeholder:"Nhập từ khóa tìm kiếm","append-icon":"mdi-magnify"},on:{"click:append":function(a){return t.getListCadresFilter("")},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getListCadresFilter("")},"click:clear":function(a){return t.getListCadresFilter("clear")}},model:{value:t.textSearch,callback:function(a){t.textSearch=a},expression:"textSearch"}})],1),"ALL"===t.checkViewCadres?e("v-col",{staticClass:"pl-3",attrs:{cols:"12",sm:"4"}},[e("div",[e("v-autocomplete",{staticClass:"flex input-form",attrs:{"hide-no-data":"",items:t.listAgencies,"item-text":"tenGoi","item-value":"maHanhChinh",dense:"",solo:"","hide-details":"auto",clearable:"","return-object":"",placeholder:"Cơ quan đơn vị"},on:{change:t.handlechangeSelectedAgencies},model:{value:t.donViSearch,callback:function(a){t.donViSearch=a},expression:"donViSearch"}})],1)]):t._e(),e("v-col",{attrs:{cols:"12",sm:"ALL"===t.checkViewCadres?4:7}},[e("div",{staticStyle:{float:"right"}},[t.checkActionAuthor&&t.checkActionAddAndUpdate?e("v-btn",{staticClass:"btn-form mx-0 text-white mr-3",attrs:{small:"",color:"primary"},on:{click:t.openDialogDecentralization}},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-file-plus")]),t._v("  Phân quyền ")],1):t._e(),t.checkActionAddAndUpdate?e("v-btn",{staticClass:"btn-form mx-0 text-white",attrs:{small:"",color:"primary"},on:{click:t.showModalForm}},[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-plus")]),t._v("  Thêm mới ")],1):t._e()],1)])],1),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[e("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listCadres,"items-per-page":t.itemsPerPage,"item-key":"PrimKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.stt",fn:function(a){var n=a.index;return[e("div",[t._v(t._s((t.page+1)*t.itemsPerPage-t.itemsPerPage+n+1))])]}},{key:"item.HoVaTen",fn:function(a){var n=a.item;return[e("div",{},[t._v(t._s(n.HoVaTen))]),e("div",[e("v-icon",{attrs:{size:"16"}},[t._v("mdi-email-fast-outline")]),t._v("  "+t._s(n.EmailVNU)+" "),e("p",{staticClass:"my-1",staticStyle:{color:"#ef5350"}},[t._v(t._s("3"===n.TrangThaiTaiKhoan?"Tài khoản bị khóa":""))])],1)]}},{key:"item.CoQuanDonVi",fn:function(a){var n=a.item;return[e("div",[t._v(t._s(n.CoQuanDonVi.TenGoi))])]}},{key:"item.thaotac",fn:function(a){var n=a.item;return[n.hindeAction?t._e():e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,o=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editCadres(n)}}},"v-btn",o,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])])]}}]),model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),e("v-dialog",{attrs:{"max-width":"1000",persistent:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[t.dialogForm?e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật cán bộ")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới cán bộ")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("form-can-bo",{ref:"formCanBoRef",attrs:{unitId:t.unitId,checkActionAuthor:t.checkActionAuthor,dataEdit:t.dataEdit,getListFunctionProps:t.getList},on:{emitDataGroup:t.handleEmitDataGroup}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1):t._e()],1),t.dialogDecentralization?e("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.dialogDecentralization,callback:function(a){t.dialogDecentralization=a},expression:"dialogDecentralization"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[e("v-toolbar-title",[t._v("Phân quyền cán bộ")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{small:"",icon:"",dark:""},on:{click:function(a){t.dialogDecentralization=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("FormPhanQuyenCanBo",{ref:"formPhanQuyenCanBoRef",attrs:{dataEditCadres:t.dataEditCadres,dataCadres:t.listCadres}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(a){t.dialogDecentralization=!1}}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.handleDecentralization}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),e("span",[t._v("Phân quyền")])],1)],1)],1)],1):t._e()],1)},i=[],o=(e("13d5"),e("e20e")),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formCanBoRef",staticClass:"pa-5",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Mã cán bộ: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{staticClass:"input-form",attrs:{rules:[t.rules.required],solo:"",disabled:!!t.dataEdit.MaSoCanBo,label:"Nhập mã cán bộ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.MaSoCanBo,callback:function(a){t.$set(t.formData,"MaSoCanBo",a)},expression:"formData.MaSoCanBo"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Họ và tên: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{staticClass:"input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầy đủ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.HoVaTen,callback:function(a){t.$set(t.formData,"HoVaTen",a)},expression:"formData.HoVaTen"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Email VNU: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{staticClass:"input-form",attrs:{rules:[t.rules.email],solo:"",label:"Nhập email...",dense:"","hide-details":"auto",disabled:!!t.dataEdit.EmailVNU},model:{value:t.formData.EmailVNU,callback:function(a){t.$set(t.formData,"EmailVNU",a)},expression:"formData.EmailVNU"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Ngày sinh:")]),e("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-text-field",t._g(t._b({staticClass:"flex input-form",attrs:{rules:[t.rules.birthday],clearable:"",label:"Nhập ngày sinh dd/mm/yyyy ...","persistent-hint":"","prepend-icon":"",solo:"",dense:"","hide-details":"auto","hide-no-data":"",readonly:""},on:{blur:function(a){t.date=t.parseDate(t.formData.NgaySinh)},input:function(a){return t.handleChangeDate()}},model:{value:t.formData.NgaySinh,callback:function(a){t.$set(t.formData,"NgaySinh",a)},expression:"formData.NgaySinh"}},"v-text-field",i,!1),n))]}}]),model:{value:t.toggleShowMenuDate,callback:function(a){t.toggleShowMenuDate=a},expression:"toggleShowMenuDate"}},[e("v-date-picker",{attrs:{"no-title":""},on:{input:function(a){t.toggleShowMenuDate=!1}},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1)],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Giới tính:")]),e("v-select",{staticClass:"input-form",attrs:{items:t.optionGender,label:"Chọn",dense:"",solo:""},model:{value:t.formData.GioiTinh,callback:function(a){t.$set(t.formData,"GioiTinh",a)},expression:"formData.GioiTinh"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Địa chỉ:")]),e("v-text-field",{staticClass:"input-form",attrs:{solo:"",label:"Nhập địa chỉ...",dense:"","hide-details":"auto"},model:{value:t.formData.diaChiThuongTru,callback:function(a){t.$set(t.formData,"diaChiThuongTru",a)},expression:"formData.diaChiThuongTru"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Tỉnh/thành:")]),e("v-select",{staticClass:"input-form",attrs:{items:t.optionProvince,label:"Chọn",dense:"",solo:""},on:{change:t.handleChangeProvince},model:{value:t.formData.TinhThanh,callback:function(a){t.$set(t.formData,"TinhThanh",a)},expression:"formData.TinhThanh"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Quận/huyện:")]),e("v-select",{staticClass:"input-form",attrs:{items:t.optionDistrict,label:"Chọn",dense:"",solo:""},on:{change:t.hanldeChangeDistrict},model:{value:t.formData.QuanHuyen,callback:function(a){t.$set(t.formData,"QuanHuyen",a)},expression:"formData.QuanHuyen"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Phường/xã:")]),e("v-select",{staticClass:"input-form",attrs:{items:t.optionWard,label:"Chọn",dense:"",solo:""},model:{value:t.formData.PhuongXa,callback:function(a){t.$set(t.formData,"PhuongXa",a)},expression:"formData.PhuongXa"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Cơ quan, đơn vị: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-select",{staticClass:"input-form",attrs:{rules:[t.rules.required],items:t.optionAgencies,label:"Chọn",dense:"",solo:""},model:{value:t.formData.CoQuanDonVi,callback:function(a){t.$set(t.formData,"CoQuanDonVi",a)},expression:"formData.CoQuanDonVi"}})],1)],1),e("v-row",[t.dataEdit.MaSoCanBo?e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Nhóm quyền:")]),e("v-autocomplete",{staticClass:"input-form custom-height-select",attrs:{items:t.optionGroups,label:"Chọn nhóm quyền",multiple:"",solo:"",disabled:!t.checkActionAuthor},model:{value:t.formData.ListQuyenCanBo,callback:function(a){t.$set(t.formData,"ListQuyenCanBo",a)},expression:"formData.ListQuyenCanBo"}})],1):t._e(),t.dataEdit.MaSoCanBo?e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Trạng thái tài khoản:")]),e("v-autocomplete",{staticClass:"input-form",attrs:{items:t.optionStatusAccount,label:"Chọn",dense:"",solo:""},model:{value:t.formData.TrangThaiTaiKhoan,callback:function(a){t.$set(t.formData,"TrangThaiTaiKhoan",a)},expression:"formData.TrangThaiTaiKhoan"}})],1):t._e()],1)],1)},r=[],l=e("2f62"),c=e("c1df"),d=e.n(c),u={props:["dataEdit","getListFunctionProps","checkActionAuthor","unitId"],data(){var t,a,e,n,i;return{formData:{MaSoCanBo:this.dataEdit.MaSoCanBo||"",GioiTinh:this.dataEdit.GioiTinh||"",HoVaTen:this.dataEdit.HoVaTen||"",NgaySinh:this.dataEdit.NgaySinh?d()(this.dataEdit.NgaySinh).add(1,"d").format("DD/MM/YYYY"):"",ListQuyenCanBo:null!==(t=this.dataEdit.ListQuyenCanBo)&&void 0!==t&&t.length?this.dataEdit.ListQuyenCanBo.map(t=>t.MaDinhDanh):[],EmailVNU:this.dataEdit.EmailVNU||"",CoQuanDonVi:this.dataEdit.CoQuanDonVi||"",diaChiThuongTru:(null===(a=this.dataEdit.diaChiThuongTru)||void 0===a?void 0:a.SoNhaChiTiet)||"",TinhThanh:(null===(e=this.dataEdit.diaChiThuongTru)||void 0===e?void 0:e.TinhThanh)||"",QuanHuyen:(null===(n=this.dataEdit.diaChiThuongTru)||void 0===n?void 0:n.QuanHuyen)||"",PhuongXa:(null===(i=this.dataEdit.diaChiThuongTru)||void 0===i?void 0:i.PhuongXa)||"",TrangThaiTaiKhoan:this.dataEdit.TrangThaiTaiKhoan||"",TinhTrangCongTac:this.dataEdit.TinhTrangCongTac||""},validForm:!1,optionPosition:[],optionDistrict:[],optionWard:[],optionGroups:[],optionStatusAccount:[{text:"Hoạt động",value:"2"},{text:"Không hoạt động",value:"1"}],rules:{required:t=>!!t||"Không được để trống.",email:t=>{const a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)||"Email VNU sai chính tả"},birthday:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;let e;return e=!t||(a.test(t)||"Định dạng ngày sinh là: ngày/tháng/năm"),e}},toggleShowMenuDate:!1,date:""}},mounted(){},created(){const t=this;var a,e,n,i;(t.getGroup(),t.dataEdit.PrimKey)&&(null!==(a=t.dataEdit)&&void 0!==a&&null!==(e=a.diaChiThuongTru)&&void 0!==e&&e.TinhThanh.MaMuc&&t.getDistrict(t.dataEdit.diaChiThuongTru.TinhThanh.MaMuc),null!==(n=t.dataEdit)&&void 0!==n&&null!==(i=n.diaChiThuongTru)&&void 0!==i&&i.QuanHuyen.MaMuc&&t.getWard(t.dataEdit.diaChiThuongTru.QuanHuyen.MaMuc))},computed:{...Object(l["b"])(["listAgencies","listProvince","listGender","listWork"]),optionGender(){const t=this,a=t.listGender.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_GioiTinh"}}));return a},optionAgencies(){const t=this;let a=t.listAgencies;t.unitId&&(a=t.listAgencies.filter(a=>a.maHanhChinh===t.unitId));const e=a.map(t=>({text:t.tenGoi,value:{MaHanhChinh:t.maHanhChinh,TenGoi:t.tenGoi}}));return e},optionProvince(){const t=this,a=t.listProvince.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_TinhThanh"}}));return a}},methods:{getDistrict(t){const a=this;let e={collectionName:"quanhuyen",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:t,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",e).then((function(t){const e=t.content;a.optionDistrict=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_QuanHuyen"},districtCode:t.maMuc}))})).catch((function(){}))},getWard(t){const a=this;let e={collectionName:"phuongxa",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:t,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",e).then((function(t){const e=t.content;a.optionWard=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_PhuongXa"}}))})).catch((function(){}))},getGroup(){let t=this;const a={page:0,size:100,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"1",thamChieu_maMuc:""},e={collectionName:"nhomquyen",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){const e=a.content;t.$emit("emitDataGroup",e),t.optionGroups=e.map(t=>({text:t.TenNhomQuyen,value:t.MaDinhDanh}))}))},validateForm(){let t=this;return t.$refs.formCanBoRef.validate()},handleChangeProvince(t){const a=this;a.optionDistrict=[],a.optionWard=[];let e={collectionName:"quanhuyen",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:t.MaMuc,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",e).then((function(t){const e=t.content;a.optionDistrict=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_QuanHuyen"},districtCode:t.maMuc}))})).catch((function(){}))},hanldeChangeDistrict(t){const a=this,e=a.optionDistrict.filter(a=>a.districtCode===t.MaMuc)[0].districtCode;if(e){let t={collectionName:"phuongxa",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:e,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",t).then((function(t){const e=t.content;a.optionWard=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc,type:"C_PhuongXa"}}))})).catch((function(){}))}},formatDate(t){if(!t)return null;const[a,e,n]=t.split("-");return`${n}/${e}/${a}`},parseDate(t){if(!t)return null;const[a,e,n]=t.split("/");return`${n}-${e.padStart(2,"0")}-${a.padStart(2,"0")}`}},watch:{date(){const t=this;t.formData.NgaySinh=t.formatDate(t.date)}}},h=u,m=(e("2279"),e("2877")),g=e("6544"),p=e.n(g),C=e("c6a6"),v=e("62ad"),f=e("2e4b"),T=e("4bd4"),_=e("e449"),A=e("0fd9"),D=e("b974"),y=e("8654"),N=Object(m["a"])(h,s,r,!1,null,"40efd7f1",null),b=N.exports;p()(N,{VAutocomplete:C["a"],VCol:v["a"],VDatePicker:f["a"],VForm:T["a"],VMenu:_["a"],VRow:A["a"],VSelect:D["a"],VTextField:y["a"]});var M=e("854a"),x=e.n(M),V=e("6f39"),k=e("3168"),E=e("4624"),L=e("66e5"),H={components:{Pagination:o["a"],FormPhanQuyenCanBo:V["a"],"form-can-bo":b},mixins:[E["a"]],data(){return{selected:[],textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:70},{sortable:!1,text:"Mã cán bộ",align:"left",value:"MaSoCanBo",class:"th-center"},{sortable:!1,text:"Họ tên",align:"left",value:"HoVaTen",class:"th-center"},{sortable:!1,text:"Cơ quan, đơn vị",align:"left",value:"CoQuanDonVi",class:"th-center"},{sortable:!1,text:"Tên nhóm quyền",align:"left",value:"tenNhomQuyen",class:"th-center"},{sortable:!1,text:"Thao tác",align:"center",value:"thaotac",class:"th-center",width:122}],listCadres:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idCadres:"",dialogDecentralization:!1,dataEditCadres:"",emitDataGroup:[],checkActionAuthor:!1,unitId:"",checkActionAddAndUpdate:"",checkViewCadres:"",donViSearch:""}},created(){const t=this;t.checkViewCadres=t.handleCheckAuthor(k["a"].XEM_CAN_BO_ALL,k["a"].XEM_CAN_BO_DV),t.checkActionAuthor=t.handleCheckActionAuthor(k["a"].PHAN_QUYEN_CAN_BO),t.getListCadres(),t.checkActionAddAndUpdate=t.handleCheckAuthor(k["a"].THEM_MOI_CAN_BO_ALL,k["a"].THEM_MOI_CAN_BO_DV),t.checkViewCadres!==L["a"].ALL&&(t.unitId=t.$cookies.get("UserInfo","").MaDonVi),t.getList("listAgencies","coquandonvi",{size:100}),t.getList("listPosition","vitrichucdanh",{keyword:"",page:0,size:100,orderFields:"tenGoi",orderTypes:"asc",coQuanDonVi_maDinhDanh:"s"}),t.getList("listWork","tinhtrangcongtac",{keyword:"",page:0,size:100,orderFields:"maMuc",orderTypes:"asc",tinhTrang:1,thamChieu_maMuc:""}),t.getList("listProvince","tinhthanh",{tinhTrang:"1"}),t.getList("listGender","gioitinh",{tinhTrang:"1"})},mounted(){},methods:{getListCadresFilter(t){const a=this;a.getListCadres({keyword:t?"":a.textSearch}),a.donViSearch=""},getListCadres(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},n={collectionName:"canbo",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",n).then((function(t){a.listCadres=t.content.map(t=>t.EmailVNU.includes("suadmin")?{...t,hindeAction:!0,tenNhomQuyen:t.ListQuyenCanBo.map(t=>t.TenNhomQuyen).join(", ")}:{...t,hindeAction:!1,tenNhomQuyen:t.ListQuyenCanBo.map(t=>t.TenNhomQuyen).join(", ")}),a.total=a.listCadres.length,a.pageCount=t.totalPages,a.page=t.pageable.pageNumber,a.loadingData=!1})).catch((function(){a.loadingData=!1}))},openDialogDeleteItem(t){const a=this;a.dialogDelete=!0,a.idCadres=t.PrimKey},editCadres(t){const a=this,e={...t,diaChiThuongTru:t.DiaChiThuongTru?t.DiaChiThuongTru:t.diaChiThuongTru,CoQuanDonVi:{MaHanhChinh:t.CoQuanDonVi.MaHanhChinh,TenGoi:t.CoQuanDonVi.TenGoi}};a.edittingForm=!0,console.log("item edit: ",t),a.dataEdit=e,a.dialogForm=!0},handlechangePage(t){const a=this;a.getListCadres(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},openDialogDecentralization(){const t=this;t.dataEditCadres=t.selected.length?t.selected.map(t=>t.MaDinhDanh):"",t.dialogDecentralization=!0},handleDecentralization(){const t=this;if(t.$refs.formPhanQuyenCanBoRef.validateForm()){const a=t.$refs.formPhanQuyenCanBoRef.formData,e=t.listCadres.reduce((t,e)=>a.canbo.includes(e.MaDinhDanh)?[...t,{IdCanBo:e.PrimKey,PhanQuyenCanBo:a.TenNhomQuyen?a.TenNhomQuyen.map(t=>({MaDinhDanhNhomQuyen:t,MaDinhDanhCanBo:e.MaDinhDanh})):[]}]:t,[]),n={payload:e,type:"canbo/many"};t.$store.dispatch("createItemData",n).then((function(a){x.a.success("Phân quyền thành công"),t.dialogDecentralization=!1,t.selected=[],t.getListCadres()})).catch((function(){t.loadingData=!1}))}},handleEmitDataGroup(t){const a=this;a.emitDataGroup=t},handlechangeSelectedAgencies(){const t=this;t.getListCadres({coQuanDonVi_maHanhChinh:t.donViSearch?t.donViSearch.maHanhChinh:""})},submitForm(){const t=this;if(t.$refs.formCanBoRef.validateForm()){const a=t.$refs.formCanBoRef.formData,e={...a,DiaChiThuongTru:{SoNhaChiTiet:a.diaChiThuongTru,TinhThanh:a.TinhThanh,QuanHuyen:a.QuanHuyen,PhuongXa:a.PhuongXa},MaSoCanBo:a.MaSoCanBo.replace(/ +/g,""),NgaySinh:a.NgaySinh?d()(a.NgaySinh,"DD/MM/YYYY").valueOf():"",PhanQuyenCanBo:[],CoQuanDonVi:a.CoQuanDonVi,GioiTinh:a.GioiTinh,TinhTrangCongTac:{...a.TinhTrangCongTac,TinhTrangCongTac:a.TinhTrangCongTac,CoQuanDonVi:a.CoQuanDonVi,ViTriChucDanh:[{MaDinhDanh:"",TenGoi:""}]}};if(delete e.TinhThanh,delete e.QuanHuyen,delete e.PhuongXa,delete e.diaChiThuongTru,e.PhanQuyenCanBo=t.emitDataGroup.reduce((t,e)=>a.ListQuyenCanBo.includes(e.MaDinhDanh)?[...t,{MaDinhDanhNhomQuyen:e.MaDinhDanh}]:t,[]),t.edittingForm){const a={payload:e,type:"canbo",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){x.a.success("Cập nhật thành công"),t.dialogForm=!1,t.listCadres=t.listCadres.reduce((function(n,i){return t.dataEdit.PrimKey===i.PrimKey?[...n,{...i,...e,NgaySinh:a.data.resp.NgaySinh,tenNhomQuyen:a.data.resp.ListQuyenCanBo.map(t=>t.TenNhomQuyen).join(", "),ListQuyenCanBo:a.data.resp.ListQuyenCanBo}]:[...n,i]}),[]),t.dataEdit={}})).catch((function(){t.loadingData=!1,x.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"canbo"};t.$store.dispatch("createItemData",a).then((function(a){if(x.a.success("Thêm mới thành công"),t.listCadres.length<t.itemsPerPage){const n=[...t.listCadres];n.push({...e,MaDinhDanh:a.data.resp.MaDinhDanh,PrimKey:a.data.resp.PrimKey}),t.listCadres=n}t.dialogForm=!1,t.total=t.listCadres.length})).catch((function(a){"canbo.masocanbo_or_emailVNU_conflict"===a.data.messageCode?x.a.error("Trùng mã cán bộ hoặc emailVNU"):x.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường"),t.loadingData=!1}))}}},getList(t,a,e){let n=this;const i={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""};let o={collectionName:a,state:t,data:e?{...i,...e}:i};n.$store.dispatch("collectionFilterInstore",o).then((function(t){})).catch((function(){console.log("Error")}))}},computed:{...Object(l["b"])(["listAgencies"]),optionAgencies(){const t=this,a=t.listAgencies.map(t=>({text:t.tenGoi,value:t.maHanhChinh}));return t.listAgencies.length?a:[]}}},P=H,B=e("8336"),S=e("b0af"),I=e("99d9"),Q=e("a523"),F=e("8fea"),O=e("169a"),w=e("132d"),$=e("2fa4"),G=e("71d9"),U=e("2a7f"),X=e("3a2f"),z=Object(m["a"])(P,n,i,!1,null,"329f1580",null);a["default"]=z.exports;p()(z,{VAutocomplete:C["a"],VBtn:B["a"],VCard:S["a"],VCardActions:I["a"],VCardText:I["b"],VCol:v["a"],VContainer:Q["a"],VDataTable:F["a"],VDialog:O["a"],VIcon:w["a"],VRow:A["a"],VSpacer:$["a"],VTextField:y["a"],VToolbar:G["a"],VToolbarItems:U["a"],VToolbarTitle:U["b"],VTooltip:X["a"]})},e7d8:function(t,a,e){}}]);